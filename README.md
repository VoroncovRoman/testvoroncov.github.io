# testvoroncov.github.io

# 1. Основная информация

## 1.1. Аннотация

Данный проект направлен на разработку и внедрение RAG-системы "Home-RAG" (далее Система). Система позволит автоматизировать поиск релевантной информации по локальной базе данных из книг и заметок. Ожидается, что внедрение приведёт к ускорению, качеству и надежности поиска специализированной информации.

## 1.2. Назначение

Автоматизация поиска информации по личной библиотеке с помощью RAG-системы, доступной через REST API. В будущем — опциональный веб-интерфейс для удобства использования.

## 1.3. Проблемы

1. **Низкая скорость поиска**: информацию по книгам и заметкам приходится искать вручную методом перебора
2. **Человеческий фактор**: высока вероятность пропуска информации
3. **Трудоемкость**: перебор всех возможных источников требует значительных затрат сил

## 1.4. Бизнес-цели

- Увеличить скорость поиска информации
- Система должна обеспечивать поиск по 100% документов в библиотеке, включая ранее игнорируемые источники

## 1.5. Критерии успеха

Проект считается успешным, если выполнены следующие условия:

- **Срок**: MVP системы выпущен не позднее чем через 4 месяца с момента старта разработки.
- **Эффективность поиска**: среднее время на выполнение одного информационного запроса сокращается с текущих 30 минут (при ручном поиске) до не более 5 минут при использовании системы.
- **Вовлечённость**: частота обращений к личной библиотеке увеличивается с текущих 1–2 раз в месяц до не менее 3 раз в неделю, что свидетельствует о росте полезности и востребованности системы.


## 1.6. Границы проекта

**В проект входит:**
- Серверное приложение с RAG-логикой.
- REST API для загрузки документов и выполнения запросов.
- Работа с документами в форматах PDF, MD и TXT.
- Однопользовательский режим (без мультиаккаунтов и разделения прав).
- Поиск по текстовому содержимому (без поддержки OCR для сканированных PDF).

**В проект НЕ входит:**
- Интеграция с внешними библиотеками (Zotero, Obsidian и др.).
- Мобильное приложение.
- Поддержка аудио/видео/изображений как источников информации.
- Автоматическая индексация новых файлов в фоне (только ручная загрузка или явное обновление).

# 2. Требования

## 2.1. User Story

### 2.1.1. MVP

**US-1**. Как пользователь, я хочу задавать запросы к своей библиотеке и получать ответы на основе содержания моих книг, чтобы быстро находить нужные материалы и цитаты.

### 2.1.2. Версия 1

**US-2**. Как пользователь я хочу иметь возможность загружать, удалять и редактировать книги, чтобы управлять содержимым своей библиотеки.

### 2.1.3. Версия 2

**US-3**. Как пользователь, я хочу работать с современным и адаптивным интерфейсом для ввода запросов, чтобы, мне было удобно формулировать сложные вопросы и видеть ответы в едином чате.

**US-4**. Как пользователь, я хочу, иметь возможность просматривать историю своих запросов, чтобы возвращаться к предыдущим поискам и повторно использовать найденные ответы.

## 2.2. Acceptance Criteria

- [ ] AC-1 (US-1). Пользователь может задать вопрос по своей библиотеке и получить содержательный ответ
- [ ] AC-2 (US-2). Пользователь может загрузить новый файл в библиотеку
- [ ] AC-3 (US-2). Пользователь может удалить файл из библиотеки
- [ ] AC-4 (US-2). Пользователь может редактировать информацию о книге в библиотеке
- [ ] AC-5 (US-3). Интерфейс содержит поле ввода для многострочного текста и кнопку отправки
- [ ] AC-6 (US-3). Интерфейс отображает ход переписки.
- [ ] AC-7 (US-4). Пользователь видит блок с историей запросов и может открыть предыдущий запрос.

## 2.3. Definition of Done (DoD)

- [ ] AC выполнены
- [ ] Код задеплоен
- [ ] Тесты пройдены
- [ ] UX подтвержден визуально

## 2.4. Functional Requirements

### 2.4.1. US-1. Запросы пользователя

**FR-1.1 (US-1).** Система должна принимать запросы пользователя на естественном языке. 
**FR-1.2 (US-1).** Если система не может обработать запрос пользователя, то она должна вывести предупреждение.
**FR-1.3 (US-1).** Система должна уметь работать с внутренней библиотекой 
**FR-1.4 (US-1).** Система должна поддерживать работу с форматами PDF, MD и TXT.
**FR-1.5 (US-1).** Если файл в библиотеке невозможно прочитать, то система должна вывести сообщение с указанием файла и кодом ошибки.
**FR-1.6 (US-1).** Система должна выводить ответ пользователю с указанием ссылки на источник.
**FR-1.7 (US-1).** Система должна хранить историю запросов, включая дату запроса, текст запроса, текст ответа
**FR-1.8 (US-1).** Система должна вести логи событий.
**FR-1.9 (US-1).** Система должна позволять обновлять RAG-модель

### 2.4.2. US-2. Управление библиотекой

**FR-2.1 (US-2).** Система должна предоставлять команды для загрузки новых файлов в библиотеку.
**FR-2.2 (US-2).** Система должна проводить соответствующие валидации загружаемых файлов
**FR-2.3 (US-2).** Система должна выводить сообщение об успешном добавлении файла в библиотеку.
**FR-2.4 (US-2).** Если файл невозможно загрузить в библиотеку, то система должна вывести предупреждение пользователю.
**FR-2.5 (US-2).** Система должна предоставлять команды для удаления файлов из библиотеки.
**FR-2.6 (US-2).** Система должна запрашивать подтверждение перед удалением файла из библиотеки.
**FR-2.7 (US-2).** Система должна выводить сообщение об успешном удалении файла из библиотеки.
**FR-2.8 (US-2).** Система должна предоставлять команды для обновления файлов в библиотеке.
**FR-2.9 (US-2).** Система должна выводить сообщение об успешном обновлении файлов в библиотеке.

### 2.4.3. US-3. Интерфейс

**FR-3.1 (US-3).** Система должна предоставлять пользователю графический интерфейс для ввода запросов и просмотра ответов.

### 2.4.4. US-4. История

**FR-4.1 (US-4).** Система должна отображать историю запросов пользователя в интерфейсе, включая дату, текст запроса и ответ

## 2.5. Non-Functional Requirements

### 2.5.1. US-1. Запросы пользователя

**NFR-1.1 (US-1).** Система должна быть доступна 99.9% времени и иметь механизмы для восстановления данных

**NFR-1.2 (US-1).**  Система должна работать при наличии 16 ГБ оперативной памяти и 100 ГБ дискового пространства.

**NFR-1.3 (US-1).** Время ответа системы не должно превышать 1 минуты

**NFR-1.4 (US-1).** Система должна работать под управлением операционной системы Linux

**NFR*-1.5.** Система поддерживает обновление RAG-модели без пересборки всего приложения.

### 2.5.2. US-2. Управление библиотекой

**NFR-2.1 (US-2).** Система не должна принимать файлы для загрузки, которые весят больше 500 МБ.

### 2.5.3. US-3. Интерфейс

**NFR-3.1 (US-3).** Интерфейс должен соответствовать современным принципам UI-дизайна, обеспечивающим визуальную согласованность и читаемость (контраст, типографика, цветовая палитра).

### 2.5.4. US-4. История

**NFR-4.2 (US-4)** — Система должна сохранять не менее **100 последних запросов** пользователя.

## 2.6. Integration Requirements 

**IR-1.** REST API должен обеспечивать загрузку, обновление, удаление и получение информации о книгах и запросах пользователя.

# Use Case

```
@startuml
left to right direction
actor Пользователь

rectangle Home-RAG{
(Сделать запрос к библиотеке)
(Добавить документ в библиотеку)
(Удалить документ из библиотеки)
(Просмотреть историю запросов)
}

Пользователь --> (Сделать запрос к библиотеке)
Пользователь --> (Добавить документ в библиотеку)
Пользователь --> (Удалить документ из библиотеки)
Пользователь --> (Просмотреть историю запросов)
@enduml
```


|Вариант использования|Сделать запрос к библиотеке|
|:---|:---|
|Краткое описание|Процесс запроса пользователем системы|
|Субъекты|Пользователь|
|Предусловие|Система запущена и доступна, есть связь с сервером, пользователь сформулировал запрос|
|Основной сценарий|1. Пользователь отправил запрос в систему через API/веб-интерфейс  <br>2. Система отображает ответ, сформированный на основе документов из библиотеки, и ссылки на использованные источники|
|Альтернативные сценарии|**AF-1**: Пользователь ввел некорректный запрос  <br>1. Система выводит сообщение об ошибке  <br>2. Пользователь исправляет запрос  <br>3. Если ошибка сохраняется, система присылает рекомендации по оформлению запроса  <br>Конец сценария|

===

|Вариант использования|Добавить документ в библиотеку|
|:---|:---|
|Краткое описание|Процесс, когда пользователь хочет добавить новый документ в библиотеку системы для обновления информации|
|Субъекты|Пользователь|
|Предусловие|Система запущена и доступна, есть связь с сервером, у пользователя есть документ для добавление в библиотеку|
|Основной сценарий|1. Пользователь отправил запрос в систему с документом  <br>2. Система выводит ответ об успешном сохранении документа|
|Альтернативные сценарии|**AF-1**: Пользователь отправил документ не поддерживаемого формата  <br>1. Система выводит сообщение об ошибке и рекомендации  <br>2. Пользователь присылает документ в нужном формате, либо присылает краткую аннотацию документа в текстовом формате  <br>Конец сценария|
||**AF-2**: Пользователь отправил документ большого размера  <br>1. Система выводит сообщение об ошибке и рекомендации  <br>2. Пользователь присылает документ нужно размера, либо по частям  <br>Конец сценария|
||**AF-3**: Пользователь прислал документ без OCR распознавания  <br>1. Система сообщает: «Файл не содержит машинно-читаемого текста. Поддерживаются только PDF с текстовым слоем, Markdown и TXT»  <br>2. Пользователь может загрузить другой файл или текстовую выдержку вручную  <br>Конец сценария|

===

|Вариант использования|Удалить документ из библиотеки|
|:---|:---|
|Краткое описание|Процесс, когда пользователь собирается удалить какой-то документ из библиотеки|
|Субъекты|Пользователь|
|Предусловие|Система запущена и доступна, есть связь с сервером, пользователь знает идентификатор документа или может выбрать его из списка|
|Основной сценарий|1. Пользователь отправил запрос через API/веб-интерфейс с идентификатором документа, либо названием  <br>2. Система запрашивает подтверждение на удаление  <br>3. Пользователь подтверждает удаление  <br>4. Система выводит оповещение об успешном удалении|
|Альтернативные сценарии|**AF-1**: Пользователь указал несуществующий документ  <br>1. Система выводит предупреждение, что документа не существует  <br>2. Пользователь перепроверяет данные и вносит корректные данные  <br>Конец сценария|

===

|Вариант использования|Посмотреть историю запросов|
|:---|:---|
|Краткое описание|Процесс, когда пользователь хочет посмотреть результаты предыдущих запросов|
|Субъекты|Пользователь|
|Предусловие|Система запущена и доступна, есть связь с сервером|
|Основной сценарий|1. Пользователь отправил запрос в систему через API/веб-интерфейс  <br>2. Система отображает список последних запросов (дата, текст, краткий ответ)|
||**AF-1**: История пуста  <br>1. Система не имеет сохранённых запросов  <br>2. Система отображает сообщение: «История запросов пуста. Отправьте первый запрос!» <br>Конец запроса.|













